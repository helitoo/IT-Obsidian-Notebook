
```insta-toc
```


Trong Next.js, cookie l√† m·ªôt h√†m b·∫•t ƒë·ªìng b·ªô (*Async function*) d√πng ƒë·ªÉ ƒë·ªçc / ghi cookie.

>[!note]
>C√≥ nhi·ªÅu cookie, m·ªói cookie c√≥ d·∫°ng `'name': value`.

C√≥ m·ªôt s·ªë ph∆∞∆°ng th·ª©c sau:

| Ph∆∞∆°ng th·ª©c                  | Ki·ªÉu             | M√¥ t·∫£                                    |
| ---------------------------- | ---------------- | ---------------------------------------- |
| `.get('name')`               | Object           | Tr·∫£ v·ªÅ gi√° tr·ªã cookie `name`.            |
| `.getAll()`                  | Array of objects | Tr·∫£ v·ªÅ danh s√°ch c√°c cookie.             |
| `.has('name')`               | Boolean          | Tr·∫£ v·ªÅ `true` n·∫øu t·ªìn t·∫°i cookie `name`. |
| `.set(name, value, options)` |                  | L∆∞u cookie `name` v·ªõi gi√° tr·ªã `value`.   |
| `.delete(name)`              |                  | X√≥a cookie `name`.                       |
| `.clear()`                   |                  | X√≥a m·ªçi cookie.                          |
| `.toString()`                | String           | Chuy·ªÉn cookie th√†nh string.              |

Khi set cookie, c√≥ m·ªôt s·ªë option sau:

| Option        | Ki·ªÉu                                   | M√¥ t·∫£                                                                                                                                                                                         |
| ------------- | -------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `expires`     | Date                                   | Th·ªùi ƒëi·ªÉm cookie h·∫øt h·∫°n.                                                                                                                                                                     |
| `maxAge`      | Number                                 | Th·ªùi gian cookie c√≤n h·∫°n (gi√¢y).                                                                                                                                                              |
| `domain`      | String                                 | T√™n mi·ªÅn m√† cookie c√≥ hi·ªáu l·ª±c.                                                                                                                                                               |
| `path`        | String, default:¬†`'/'`                 | Routing path m√† cookie c√≥ hi·ªáu l·ª±c.                                                                                                                                                           |
| `secure`      | Boolean                                | Ch·ªâ cho ph√©p d√πng cookie v·ªõi protocol `https`.                                                                                                                                                |
| `httpOnly`    | Boolean                                | Ch·ªâ cho ph√©p server d√πng cookie.                                                                                                                                                              |
| `sameSite`    | Boolean,¬†`'lax'`,¬†`'strict'`,¬†`'none'` | - `lax`: Cookie ch·ªâ c√≥ hi·ªáu l∆∞c khi c√πng domain.<br><br>- `strict`: Cookie c√≥ hi·ªáu l·ª±c tr√™n nhi·ªÅu domain nh∆∞ng ch·ªâ khi th√¥ng qua c√°c ph∆∞∆°ng th·ª©c an to√†n nh∆∞ link hay `GET`.<br><br>- `None`. |
| `priority`    | `"low"`,¬†`"medium"`,¬†`"high"`          | M·ª©c ƒë·ªô ∆∞u ti√™n gi·ªØ cookie l·∫°i (*trong tr∆∞·ªùng h·ª£p browser x√≥a c√°c cookie t·ªën b·ªô nh·ªõ*).                                                                                                         |

**VD: T·∫°o cookie khi user login**:
```tsx

import { cookies } from 'next/headers'

export async function loginAction(formData: FormData) {
  const username = formData.get('username')
  const password = formData.get('password')
  
  if (is_valid(username, password)) {
    const token = 'abc123xyz'
    
    // T·∫°o cookie ƒëƒÉng nh·∫≠p
    const cookieStore = await cookies()
    
    cookieStore.set('auth_token', token, {
      httpOnly: true,
      secure: process.env.NODE_ENV === 'production',
      sameSite: 'lax',
      path: '/',
      maxAge: 60 * 60 * 24 * 7, // 7 ng√†y
    })

    return { success: true }
  }

  return { success: false, error: 'Sai th√¥ng tin ƒëƒÉng nh·∫≠p' }
}
```

**VD: D√πng cookie ƒë·ªÉ hi·ªÉn th·ªã th√¥ng tin client**:
```tsx
import { cookies } from 'next/headers'
import { redirect } from 'next/navigation'

export default async function DashboardPage() {
  const cookieStore = await cookies()
  const token = cookieStore.get('auth_token')?.value

  if (!token)
    redirect('/login')

  return (
    <main className="p-5">
      <h1 className="text-2xl font-bold">Xin ch√†o, Admin üëã</h1>
      <p>Token hi·ªán t·∫°i: {token}</p>
    </main>
  )
}
```

**VD: X√≥a cookie khi ƒëƒÉng xu·∫•t**:
```tsx
'use server'

import { cookies } from 'next/headers'

export async function logoutAction() {
  const cookieStore = await cookies()
  cookieStore.delete('auth_token')
}
```








