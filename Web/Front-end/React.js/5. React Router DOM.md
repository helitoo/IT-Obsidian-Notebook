
```insta-toc
---
title:
  name: Mục lục
  level: 1
  center: false
exclude: ""
style:
  listType: number
omit: []
levels:
  min: 1
  max: 6
---

# Mục lục

1. Giới thiệu & Cài đặt
2. Cấu trúc cơ bản
```

# Giới thiệu & Cài đặt

**Navigation** là một cơ chế giúp bạn routing (chuyển đổi giữa các page) ngay trong front-end.

Cài đặt:
```sh
npm install react-router-dom
```

# Cấu trúc cơ bản

Gồm có các component sau:
1. `BrowserRouter`: Bao bọc toàn ứng dụng web.
2. `Route`: Gồm 2 thuộc tính là `path` (đường dẫn) và `element` (component sẽ được hiển thị ra khi người dùng vào `path`).
3. `PrivateRoute`: Là `Route` nhưng người dùng chỉ có thể truy cập nếu thỏa mãn một số điều kiện nhất định.
4. `Routes`: Bao bọc các `Route`. Vị trí của `Routes` sẽ được thay bằng component tương ứng với `Route` hay `PrivateRoute` đang được kích hoạt.
5. `NavLink`: Giống thẻ `a`, có thuộc tính `to` dùng để chuyển sang component tương ứng với `to`.

Ngoài cách dùng `NavLink`, có 2 cách để dev chủ động routing:
1. `Navigate`: Component.
2. `navigate("urPath")`: Hàm.

VD: Xây dựng hệ thống navbar.

```tsx
type NavItemProps = {
  label: React.ReactNode;   // Tiêu đề hiển thị khi render
  path: string;             // Đường dẫn
  element: React.ReactNode; // Component được render khi click vào NavLink
  isPrivate: boolean;       // Route có private không?
  publicShow: boolean;      // Hiển thị NavLink khi user chưa đăng nhập?
  privateShow: boolean;     // Hiển thị NavLink khi user đã đăng nhập?
};

export const navProps: NavItemProps[] = [
  {
    label: "Trang chủ",
    path: "/",
    element: <HomePage />,
    isPrivate: false,
    publicShow: true,
    privateShow: true,
  },
  {
    label: "Hướng dẫn",
    path: "/docs",
    element: <DocsPage />,
    isPrivate: false,
    publicShow: true,
    privateShow: true,
  },
  {
    label: "Đăng nhập",
    path: "/signin",
    element: <SigninPage />,
    isPrivate: false,
    publicShow: true,
    privateShow: false,
  },
  {
    label: "Đăng ký",
    path: "/signup",
    element: <SignupPage />,
    isPrivate: false,
    publicShow: true,
    privateShow: false,
  },
  {
    label: "Tài khoản",
    path: "/profile",
    element: <ProfilePage />,
    isPrivate: true,
    publicShow: false,
    privateShow: true,
  },
];
```

Xây dựng `PrivateRoute`: Tự động điều hướng sang `/sigin` nếu user chưa đăng nhập mà vào route này:
```tsx
export const PrivateRoute = ({ element }: { element: ReactNode }) => {
  const signined = // ... Trả về true nếu đã đăng nhập
  return signined ? element : <Navigate to="/signin" replace />;
};
```

`NavBar`
```tsx
export const Navbar = () => {
  return (
    <>
      {/* ... Navbar HTML ... */}
      <div>
        <Routes>
          {navProps.map((item, i) => (
            <Route
              key={i}
              path={item.path}
              element={
                item.isPrivate ? (
                  <PrivateRoute element={item.element} />
                ) : (
                  item.element
                )
              }
            />
          ))}
        </Routes>
      </div>
    </>
  );
};
```

`NavList`
```tsx
export const NavList = ({
  navProps,
  isOpen,
}: {
  navProps: NavItemProps[];
  isOpen: boolean;
}) => {
  const { user } = useAuth();

  return (
    <div>
      <ul>
        {navProps
          .filter((item) => (user ? item.privateShow : item.publicShow))
          .map((item, i) => (
            <NavItem key={i} path={item.path}>
              {item.label}
            </NavItem>
          ))}
      </ul>
    </div>
  );
};
```

`NavItem`
```tsx
export const NavItem = ({
  children,
  path,
}: {
  children: React.ReactNode;
  path: string;
}) => {
  return (
    <li>
      <NavLink to={path}>
        {children}
      </NavLink>
    </li>
  );
};
```
