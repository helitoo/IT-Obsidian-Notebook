
```insta-toc
---
title:
  name: Mục lục
  level: 1
  center: false
exclude: ""
style:
  listType: number
omit: []
levels:
  min: 1
  max: 6
---

# Mục lục

1. Xây dựng Dockerfile
2. Xây dựng image
3. Chạy container
```

Một dự án Docker thực tế là 1 folder trong máy tính bạn.
Trong bài viết, thư mục đó sẽ có tên là `my_project`.

# Xây dựng Dockerfile

Dockerfile bao gồm các định nghĩa, hướng dẫn cho Docker để xây dựng các Image. Dockerfile không có phần mở rộng.

**Một số cú pháp của `Dockerfile`**:

**`FROM`**:
- Tên image (*base-image*) mà image hiện tại dựa trên.
- [Docker hub](https://hub.docker.com/): Các image được chia sẻ miễn phí bởi cộng đồng.

**`WORKDIR`**:
- Địa chỉ folder chính bên trong image.
- Bên trong image cũng có cây thư mục tương tự 1 project thường.

**`COPY`**:
- Địa chỉ các file trong thiết bị thật.
- Docker sẽ copy các file đó vào image.

**`RUN`**:
- Các thư viện cần để image hoạt động.

**`EXPOSE`**:
- Chỉ định số port của image.
- Số port này cần được mapping đến 1 port của máy thực. Khi truy cập vào port của máy thực thì các script bên trong container tương ứng sẽ được thực thi.

**`CMD`**:
- Các bash-script sẽ được thực thi khi container được chạy.

VD:
`Dockerfile`
```dockerfile
# Xây dựng image dựa trên ubuntu
# Nếu ubuntu chưa được cài đặt trên máy bạn thì Docker sẽ tự cài
FROM ubuntu

WORKDIR /src

# Sao chép main.py vào scr/main.py của container
COPY main.py ./main.py

# Cập nhật các packages (apt-get-update)
# Và cài thêm các thư viện cần thiết
RUN apt-get-update
RUN apt-get -y install python3

# Chạy lệnh python3 main.py khi thực thi container
CMD ["python3", "main.py"]
```

Trong đó:
- `apt-get`: Là trình quản lý package hỗ trợ bởi Docker, có thể áp dụng cho hầu hết thư viện.
- Cờ `-y` có tác dụng pass qua các câu hỏi `[Yes/no]` khi cài đặt thư viện.

# Xây dựng image

```sh
docker build -t my_project .
```
- `-t`: Tên của Docker project.
- `.`: Quét tìm Dockerfile bên trong project.

# Chạy container

```sh
docker run my_project
```

Hoặc sử dụng *GUI* để run container.

Docker Destop sẽ yêu cầu một số thuộc tính như `Ports`: Số port của máy thực. Số port này sẽ được mapping vào port của container. Nếu ứng dụng không cần port thì không cần khai báo.

**Chạy container và chuyển đến bash của container đó (Interactive mode)**:
```sh
docker run -it my_project bash
```
Tại bash, bạn có thể thao tác với các file bên trong container.








