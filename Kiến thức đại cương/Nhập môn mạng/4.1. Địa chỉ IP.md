
```insta-toc
---
title:
  name: Mục lục
  level: 1
  center: false
exclude: ""
style:
  listType: number
omit: []
levels:
  min: 1
  max: 6
---

# Mục lục

1. Interface & Địa chỉ IP
2. Phân loại địa chỉ IP
    1. Phân loại dựa trên số lượng bit tổng thể
    2. Phân loại dựa trên phạm vi sử dụng
3. Cấu trúc địa chỉ IP
    1. Các thành phần của địa chỉ IP
    2. Subnet mask
4. Định dạng địa chỉ IPv4 & Phân lớp mạng
5. Chia mạng con
6. Cấp phát địa chỉ IP
    1. Đối với host
    2. Đối với mạng
```

# Interface & Địa chỉ IP

- **Cổng giao tiếp (Interface)**: kết nối giữa host/router và liên kết vật lý. Một host có thể có nhiều interface cho nhiều mạng khác nhau. VD: Interface cho *Wifi*, *Ethernet*, *Loopback (Localhost)* (mạng ảo cho phép máy tính tự kết nối với nó),...`
- **Địa chỉ IP (Internet protocol)**: Là mã định danh cho mỗi interface.

>[!note]
>Số lượng interface của router thường **nhiều hơn** các host.

# Phân loại địa chỉ IP

## Phân loại dựa trên số lượng bit tổng thể

|                  | **IPv4**              | **IPv6**                         |
| ---------------- | --------------------- | -------------------------------- |
| **Số lượng bit** | 32 = 4 octet = 4 byte | 128                              |
| **VD**           | `192.168.1.1`         | `2001:0db8:85a3::8a2e:0370:7334` |

## Phân loại dựa trên phạm vi sử dụng

- **Private IP**: Sử dụng trong mạng *LAN*, ngoài mạng thì không truy cập được, có thể dùng nhiều lần cho các host. Các địa chỉ private thì sử dụng các địa chỉ IP dành riêng (*nói thêm ở phần phân lớp mạng*).
- **Public IP**: Sử dụng trong mạng *WAN*, dùng để định tuyến và có tính duy nhất cho mỗi host.
- **Loopback IP**: Sử dụng nội bộ trên 1 host, host đó có thể gửi và tự nhận dữ liệu.

# Cấu trúc địa chỉ IP

## Các thành phần của địa chỉ IP

|                                     | Vị trí           | Cách nhận diện                            | Đặc điểm                                                                                                 |
| ----------------------------------- | ---------------- | ----------------------------------------- | -------------------------------------------------------------------------------------------------------- |
| **Địa chỉ mạng**<br>(Network)       | Đầu địa chỉ IP   | Các bit đầu khác `0`, các bit sau là `0`. | Là địa chỉ của mạng của các host, các host chung địa chỉ mạng có thể trao đổi mà không thông qua router. |
| **Địa chỉ host**                    | Giữa             | Giá trị nằm giữa `0` và `255`.            | Dùng để đặt tên cho các interface của các host. Các máy trong cùng mạng có địa chỉ host giống nhau.      |
| **Địa chỉ quảng bá**<br>(Broadcast) | Cuối địa chỉ IP. | Các bit cuối có giá trị `255`.            | Khi địa chỉ broadcast nhận được dữ liệu thì mọi host khác cùng mạng đều nhận được.                       |

## Subnet mask

**Subnet mask** 1 dãy 32 bit có `x` bit đầu tiên là `1`, các bit còn lại là `0`.
**Ký hiệu**: `bbbb.bbbb.bbbb.bbbb/x`.

Địa chỉ mạng được xác định bằng cách thực hiện phép **`AND` giữa địa chỉ IP và subnet mask**.

# Định dạng địa chỉ IPv4 & Phân lớp mạng

Địa chỉ IPv4 có 2 phần, được phân làm 5 lớp:
- **Phần mạng**: Chỉ ra số lượng mạng của lớp đó.
- **Phần host**: Chỉ ra số lượng host của lớp đó.

| Lớp   | Các bit đầu tiên | Giá trị của byte đầu tiên | Số byte phần mạng | Số byte phần host | Mục đích        |
| ----- | ---------------- | ------------------------- | ----------------- | ----------------- | --------------- |
| **A** | `0`              | `1` - `126`               | 1                 | 3                 | Mạng lớn        |
| **B** | `10`             | `128` - `191`             | 2                 | 2                 | Mạng trung bình |
| **C** | `110`            | `192` - `223`             | 3                 | 1                 | Mạng nhỏ        |
| **D** | `1110`           | `224` - `239`             | --                | --                | Multicast       |
| **E** | `1111`           | `240` - `255`             | --                | --                | Nghiên cứu      |

Cho địa chỉ có $s$ bit phần mạng và $4\times8-s$ bit phần host:
- **Số lượng mạng con**: $\boxed{2^s}$.
- **Số lượng host**: $\boxed{2^s-2}$ (*trừ đi địa chỉ mạng và địa chỉ broadcast*).

Địa chỉ có byte đầu là `127` được dùng là **Loopback**.

**Đối với private IP, mỗi lớp có các địa chỉ IP dành riêng như sau**:
- **A**: Các địa chỉ có byte 1 là `10`.
- **B**: Các địa chỉ có byte 1 là `172` và byte 2 là `16` - `31`.
- **C**: Các địa chỉ có 2 byte đầu là `192.168`.

# Chia mạng con

**Chia mạng con**: Là phân chia 1 mạng lớn thành nhiều mạng nhỏ hơn (**Subnet**).
- Tiết kiệm, tận dụng địa chỉ IP.
- Phân hoạch thành các mạng riêng biệt, dễ quản lý.

**Các bước chia mạng**:
1. Xác định lớp mạng của địa chỉ IP và $s$ là số bit phần mạng.
2. Mượn 1 số bit còn trống để làm địa chỉ host.
3. Xác định các vùng địa chỉ host.

# Cấp phát địa chỉ IP

## Đối với host

Có các loại:
1. **Static IP**:
	- Địa chỉ cố định, được sysadmin cấu hình trong file cấu hình hệ thống.
	- Ưu: Đơn giản, không phụ thuộc DHCP.
	- Nhược: Khó quản lý khi mạng lớn hoặc host di động.

2. **Dynamic IP - DHCP (Dynamic Host Configuration Protocol)**:
	- Cho phép **host tự động lấy địa chỉ IP** khi tham gia mạng.
	- Quy trình:
		1. **DHCP discover**: Host gửi yêu cầu tìm DHCP cho DHCP server (Router, server chuyên dụng,...).
		2. **DHCP offer**: Server đề xuất địa chỉ IP.
		3. **DHCP request**: Host xác nhận muốn sử dụng địa chỉ.
		4. **DHCP ACK**: Server xác nhận, host nhận IP.
	- DHCP cũng cung cấp:
		- Default gateway (IP router).
		- Subnet mask (xác định phần mạng vs host).
		- DNS server (tên miền → IP).
	- Lợi ích:
		- Hỗ trợ host di động.
		- Sử dụng lại địa chỉ IP khi host rời mạng.

## Đối với mạng

1. ISP và phân bổ khối địa chỉ:
	1. ISP nhận khối địa chỉ từ ICANN.
	2. ISP phân chia khối này thành nhiều subnet cho các tổ chức.
	3. Tổ chức chia subnet này cho mạng cục bộ.

2. Mạng nội bộ và NAT:
	- Các thiết bị trong mạng cục bộ có thể dùng địa chỉ IP riêng tư: `10.0.0.0/8`, `172.16.0.0/12`,...
	- Khi ra Internet, NAT (Network Address Translation) chuyển đổi địa chỉ IP nội bộ thành IP công cộng.
	- Giúp tiết kiệm địa chỉ IPv4 và bảo mật mạng nội bộ.












