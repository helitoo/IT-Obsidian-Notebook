
```insta-toc
---
title:
  name: Mục lục
  level: 1
  center: false
exclude: ""
style:
  listType: number
omit: []
levels:
  min: 1
  max: 6
---

# Mục lục

1. Nguyên lý của các ứng dụng mạng
    1. Đặc điểm của ứng dụng mạng
    2. Kiến trúc ứng dụng mạng
    3. Tiến trình
    4. Socket
    5. Giao thức
```

# Nguyên lý của các ứng dụng mạng

## Đặc điểm của ứng dụng mạng

Ứng dụng mạng:
- Chạy trên các **host khác nhau**.
- Giao tiếp qua **mạng**.
- **Không** cần viết phần mềm cho các thiết bị trong mạng lõi.

## Kiến trúc ứng dụng mạng

Có 2 loại:

| **Mô hình** | Client - Server                                                                                                                                                  | Peer to peer (P2P, mô hình ngang hàng)                                                                                                                                                                                                                                                                         |
| ----------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Server**  | - Luôn hoạt động.<br><br>- Địa chỉ IP cố định.<br><br>- Trung tâm phục vụ và lưu trữ<br>dữ liệu.                                                                 | - Không có server.                                                                                                                                                                                                                                                                                             |
| **Client**  | - Giao tiếp với server.<br><br>- Có thể kết nối không liên tục.<br><br>- Có thể dùng địa chỉ IP động.<br><br>- Không giao tiếp trực tiếp với<br>các client khác. | - Các hệ thống đầu cuối giao tiếp trực<br>tiếp với nhau.<br><br>- Các peer yêu cầu dịch vụ từ các peer<br>khác và cung cấp dịch vụ ngược lại từ các<br>peer khác.<br><br>=> Có khả năng tự mở rộng.<br><br>- Các peer được kết nối không liên tục và<br>có thể thay đổi địa chỉ IP.<br><br>- Quản lí phức tạp. |

Ngoài ra còn có **kiến trúc lai (Hybrid)** kết hợp các đặc điểm của Client-Server và P2P.

Mỗi host được định danh bằng:
- 1 địa chỉ logic trên mạng là **địa chỉ IP**.
- 1 địa chỉ vật lý là **địa chỉ MAC**.

## Tiến trình

Ứng dụng mạng gồm nhiều **tiến trình (processes)** chạy trên các host, gửi thông điệp qua mạng.
- Trên **cùng host**, tiến trình giao tiếp qua **interprocess communication** của hệ điều hành.
- **Khác host**, tiến trình giao tiếp qua **trao đổi thông điệp (message exchange)**.

Có 2 loại tiến trình:
- **Client process**: Khởi tạo truyền thông.
- **Server process**: Chờ đợi để được liên lạc.

Mỗi tiến trình được định danh bằng 1 **số port**. Port là số hiệu cổng liên kết đến tiến trình.

>[!important] Trong kiến trúc **P2P**:
>- Một host có thể vừa chạy client process, vừa chạy server process.
>- Trong 1 phiên giao tiếp, vẫn phân biệt host nào là client, host nào là server.

## Socket

Socket là **giao diện phần mềm (API)** giữa application layer và transport layer. Có thể nói socket là cửa ra vào các tiến trình.

Mỗi socket đều được định danh bằng một **số cổng (port number)**.
- **Các port từ $0$ -> $2^{10}-1$ (Well-know ports)**: Dùng cho các dịch vụ chuẩn như HTTP, HTTPS, SMTP,...
- **Các port từ $2^{10}$ đến $2^{16}-1$ (Ephemeral ports)**: Do hệ thống tự cấp phát.

>[!note]
>Số port nhỏ nhất có thể dùng là **1024**, lớn nhất là **65535**.
>- Client thường dùng port >= 1024.
>- Server thường dùng port > 1024.

Dev kiểm soát phía application layer, nhưng chỉ có 2 lựa chọn phía transport layer:
1. Chọn giao thức (TCP hoặc UDP).
2. Điều chỉnh vài tham số (ví dụ buffer size).

Để gửi dữ liệu cho đúng tiến trình, cần 2 thông tin:
1. **[[4.2. Chuyển tiếp (Fowarding)#Địa chỉ IP|Địa chỉ IP]]**: Địa chỉ logic của host (*khác với MAC là địa chỉ vật lý*). Địa chỉ IP là một dãy số, có thể viết dưới một số dạng khác:
	1. **Dạng ký tự dài (Domain / host name)**: VD `relay1.west-coast.enterprise.com`.
	2. **Dạng ký tự ngắn (Alias)**: VD tên miền trên có thể có 2 alias là `enterprise.com` hoặc `www.enterprise.com`.

2. **Số cổng (Port number)**: Định danh socket ứng với tiến trình trong host.

>[!note]
>- **Port**: Là số hiệu định danh cho socket liên kết với process tương ứng.
>- **Địa chỉ IP**: Địa chỉ logic của host.
>- **Địa chỉ MAC**: Địa chỉ vật lý của host.
>- Để gửi dữ liệu thì cần đính **địa chỉ IP và số port** cho gói tin.

>[!note]
>Tại 1 thời điểm, 1 host có thể **mở nhiều port** ứng với nhiều process, nhưng chỉ có 1 IP address.
