
# Lớp & Đối tượng

## Khai báo

Khai báo lớp:
```java
public class urClass {
	// ...
}
```

Khai báo đối tượng:
```java
urClass urObject = new urClass();
```

## Cấu trúc chương trình Java

### Package

Package là nhóm các lớp và các thành phần khác có liên quan với nhau (do người lập trình quy định) được tổ chức chung lại để dễ quản lý, tránh trùng tên, và tái sử dụng mã. Cũng có thể nói, package là folder chứa các file `.java`.

Tên package phải thể hiện cấu trúc folder.
VD:
```lua
src/
 └─ myapp/
      └─ utils/
           └─ Helper.java
```
Thì `Helper.java` phải khai báo package là `package myapp.utils;`.

Mỗi file `.java` chỉ được phép khai báo một lớp có phạm vi `public`. Tên lớp này phải trùng với tên file. VD:

`Main.java`
```java
package urPackage;

public class Main {
	// ...
}
```

### Giao tiếp giữa các lớp

Các lớp trong cùng package có thể được gọi tự do theo phạm vi truy cập.

Lớp Aclass muốn truy cập đến lớp Bclass khác package (theo phạm vi truy cập) thì phải có thêm `import`:

```java
import Bpackage.Bclass; //.Bmember
```
Import class `Bclass` (hoặc thành viên cụ thể của `Bclass`) trong package `Bpackage`.

```java
import Bpackage.*; // .*
```
Import toàn bộ class từ `Bpackage`.

**Chú ý**:
- Cú pháp `import` chỉ có phạm vi trực tiếp đến package được chỉ thị, không bao gồm các package con (nếu có).
- `import` chỉ có ý nghĩa thực khi compile.
- Package `java.lang.*` luôn được mặc định import sẵn.

# Các thành phần của lớp

## Thuộc tính (Attribute / Field) & Phương thức (Method)

Thuộc tính có thể coi là các biến của lớp, có cú pháp khai báo tương tự như [[2. Các kiểu dữ liệu sơ cấp#Kiểu dữ liệu|khai báo biến thông thường]].

Phương thức có thể coi là các hàm của lớp. Ví dụ:
```java
static void urMethod(...) {
	// ...
}
```
Method có thể nhận tham số không mặc định, nạp chồng và `return` giống như C++.

## Truy cập các thành phần của lớp

Sử dụng toán tử `.` như C++:
```java
urObject.urAtt         // Truy cập thuộc tính
urObject.urMethod(...) // Truy cập phương thức
```

Bạn chỉ được phép truy cập các thành phần của lớp tùy theo phạm vi truy cập của lớp đó. Có các phạm vi truy cập là:

| Phạm vi                   | Truy cập từ cùng lớp | Truy cập từ cùng package | Truy cập từ package khác (kế thừa) | Truy cập từ package khác (không kế thừa) |
| ------------------------- | -------------------- | ------------------------ | ---------------------------------- | ---------------------------------------- |
| `public`                  | OK                   | OK                       | OK                                 | OK                                       |
| `protected`               | OK                   | OK                       | OK                                 |                                          |
| Mặc định (không khai báo) | OK                   | OK                       |                                    |                                          |
| `private`                 | OK                   |                          |                                    |                                          |

## Thay đổi các hoạt động của lớp & các thành phần của lớp

Một số từ khóa:

| Từ khóa        | Đối với class         | Đối với thuộc tính                                           | Đối với phương thức                               |
| -------------- | --------------------- | ------------------------------------------------------------ | ------------------------------------------------- |
| `static`       |                       | Tất cả đối tượng có chung tt `static` có giá trị giống nhau. | Tất cả đối tượng có chung pt `static` giống nhau. |
| `final`        | Không được kế thừa.   | Không được thay đổi.                                         | Không thể ghi đè (kế thừa).                       |
| `abstract`     | Không thể tạo object. |                                                              | Buộc phải được ghi đè (kế thừa).                  |

## Từ khóa `this`

`this` được dùng để chỉ đối tượng hiện tại của class.

VD:
```java
public class Main {
	int x;
	public modifyX(int x) {
		this.x = x; // this x là chỉ thuộc tính x của Main
	}
}
```

`this(...)` cũng có thể được dùng để gọi constructor.

VD:
```java
public class Main {
	int modelYear;
	String modelName;
	  
	public Main(String modelName) {  
		this(2020, modelName);
	}
	
	public Main(int modelYear, String modelName) {
	    this.modelYear = modelYear;
	    this.modelName = modelName;
	}
}
```
Khi gọi `this(2020, modelName)`, nó sẽ gọi constructor có 2 tham số tương ứng.

## Phương thức khởi tạo (Constructor)

Constructor là một phương thức đặc biệt:
- Không có kiểu dữ liệu (nên không có giá trị trả về).
- Có tên trùng với tên class.
- Có phạm vi `public`.
Được dùng để khởi tạo giá trị cho các thuộc tính của class.

VD:
Constructor không tham số:
```java
public class Main {
  int x;

  public Main() {
    x = 5;
  }
}

// Main urObject = new Main();
```
Constructor có tham số:
```java
public Main(int x) {
    this.x = x;
}

// Main urObject = new Main(5); ==> x = 5
```

Constructor sẽ được gọi mỗi khi đối tượng được khởi tạo.

## Phương thức chính (main)

Mỗi class phải có duy nhất một phương thức `public static void` là `main`.
- `main` là phương thức được gọi để chạy đầu tiên khi chương trình bắt đầu thực thi.
- `main` được gọi mà không cần khởi tạo lớp chứa nó.

VD:
`Main.java`
```java
public class Main {
    public static void main(String[] args) {
        // ...
    }
}
```
Trong đó, `args` là đối số, nhận khi gọi `Main` qua CLI.
VD:
```javac
java Main "Hello world" user
```
Khi đó, `args = ["Hello word", "user"]`.

## Enum class

Enum là một dạng class đặc biệt chỉ chứa các hằng giá trị (`public`, `static`, `final`). Mỗi giá trị này là một đối tượng của enum.

VD:
```java
public class Main {
	enum Level {
		LOW,
		MEDIUM,
		HIGH
	}
	
	public static void main(String[] args) {
		System.out.println(Level.MEDIUM); // MEDIUM
	}
}
```

Duyệt các giá trị của enum bằng `.values()`:
```java
for (Level myVar : Level.values()) {
	System.out.println(myVar);
}
// LOW
// MEDIUM
// HIGH
```

## Wrapper class

Các [[2. Các kiểu dữ liệu sơ cấp#Các kiểu primitive|primitive type]] không phải object. Wrapper class là các lớp hỗ trợ cho các thao tác với biến primitive type như là một object.

Các wrapper class đều được khai báo trong package `java.lang`.

| Primitive Data Type | Wrapper Class |
| ------------------- | ------------- |
| `byte`              | `Byte`        |
| `short`             | `Short`       |
| `int`               | `Integer`     |
| `long`              | `Long`        |
| `float`             | `Float`       |
| `double`            | `Double`      |
| `boolean`           | `Boolean`     |
| `char`              | `Character`   |

Một phương thức khá hay của các wrapper là các phương thức tĩnh dùng để ép kiểu dữ liệu:
- `Integer.toString(val)`: Ép `int` sang `String`.
- `Integer.parseInt(val)`: Ép sang `int`. Tương tự với `.parseFloat()`, `.parseLong()`,...

